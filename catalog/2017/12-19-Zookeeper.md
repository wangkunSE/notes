### 一 分布式架构

#### 1.1 从集中式到分布式

##### 1.1.1 集中式的特点

> 部署简单，价格昂贵，性能卓越，单点问题（一旦大型主机出现故障，整个系统将处于不可用状态）

##### 1.1.2 分布式的特点

> 分布性：分布式系统计算机在物理空间上随意分布，同时，机器的分布情况也随时变动。
>
> 对等性：没有主从之分。多用副本。
>
> 并发性：多点操作
>
> 缺乏全局时钟：无法明确的确定事件顺序。
>
> 故障总会发生：网络及机器的不稳定性。

##### 1.1.3 分布式环境的各种问题

> 通信异常：网络时延
>
> 网络分区：当一部分节点宕机时出现的部分工作区域
>
> 三态：成功、失败、超时（通信双方都有可能出现）
>
> 节点故障：服务器节点出现宕机或僵死状态

#### 1.2 从ACID到CAP/BASE

##### 1.2.1 ACID

> 事务：对数据进行访问与更新的操作所组成的一个程序执行逻辑单元。
>
> 一致性：尚未完成的事务对数据有更改的操作会破坏数据库的一致性。
>
> 持久性：事务成功对数据库的修改是永久的，不管数据库在什么样的状态都可以恢复到事务成功结束时的状态。

##### 1.2.2 分布式事务

> 分布式事务是指事务的参与者、支持事务的服务器、资源服务器以及事务管理器分别位于分布式系统的不同节点之上。
>
> 一个分布式事务可以看做是由多个分布式的操作序列组成的。如转账服务中的取款服务和存款服务。

##### 1.2.3 CAP和BASE理论

> 起因：可用性和一致性的冲突。
>
> CAP： 
>
> - 一致性：各个节点拥有同一数据视图
> - 可用性：对于用户的每一个操作请求总是能够在有限的时间内返回结果。友好的回答，尽可能快速的回复。
> - 分区容错性：任何网络分区发生故障不影响分布式系统提供的服务。（妻子以任何形式不工作了，记录本无法同步）
>
> BASE：
>
> - Basically Available(基本可用)、Soft state(软状态)、Eventually consistent(最终一致性)。